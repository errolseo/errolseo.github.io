<!DOCTYPE html>
<html lang="en-us">
  <head>
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/errolseo.github.io\/",
  "author": {
    "@type": "Person",
    "name": "Errol Seo",
    
    "image": "https://errolseo.github.io/images/profile.png"
    
  },
  "name":"Errol\u0027s AI blog",
  "description":"About synthetic data (with SynthTIGER)",
  "url":"https:\/\/errolseo.github.io\/post\/ocr\/3\/",
  "keywords":"[]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.147.6 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="Errol Seo">
<meta name="keywords" content="">
<meta name="description" content="About synthetic data (with SynthTIGER)">


<meta property="og:description" content="About synthetic data (with SynthTIGER)">
<meta property="og:type" content="article">
<meta property="og:title" content="Synthetic Text Image (2/3)">
<meta name="twitter:title" content="Synthetic Text Image (2/3)">
<meta property="og:url" content="https://errolseo.github.io/post/ocr/3/">
<meta property="twitter:url" content="https://errolseo.github.io/post/ocr/3/">
<meta property="og:site_name" content="Errol&#39;s AI blog">
<meta property="og:description" content="About synthetic data (with SynthTIGER)">
<meta name="twitter:description" content="About synthetic data (with SynthTIGER)">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2022-03-22T00:00:00">
  
  
    <meta property="article:modified_time" content="2022-03-22T00:00:00">
  
  
  
    
      <meta property="article:section" content="OCR">
    
  
  
    
      <meta property="article:tag" content="Synthetic Text Image">
    
      <meta property="article:tag" content="SynthTIGER">
    
  


<meta name="twitter:card" content="summary">







  <meta property="og:image" content="https://errolseo.github.io/images/profile.png">
  <meta property="twitter:image" content="https://errolseo.github.io/images/profile.png">





  <meta property="og:image" content="https://errolseo.github.io/images/OCR/3/1.webp">
  <meta property="twitter:image" content="https://errolseo.github.io/images/OCR/3/1.webp">


    <title>Synthetic Text Image (2/3)</title>

    <link rel="icon" href="https://errolseo.github.io/images/favicon.png">
    

    

    <link rel="canonical" href="https://errolseo.github.io/post/ocr/3/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://errolseo.github.io/css/style-kz4j18ung6qsj8w0uq0ht5ijso2qjpgmg5e5kg3bq5iwgbloxvv7hwh8.min.css" />
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7TXCGWW79C"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7TXCGWW79C');
    </script>
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://errolseo.github.io/" aria-label="Go to homepage">Errol&#39;s AI blog</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://errolseo.github.io/about" aria-label="Open the link: /about">
    
    
    
      
        <img class="header-picture" src="https://errolseo.github.io/images/profile.png" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <img class="sidebar-profile-picture" src="https://errolseo.github.io/images/profile.png" alt="Author&#39;s picture" />
        <h4 class="sidebar-profile-name">Errol Seo</h4>
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://errolseo.github.io/" title="Home">
    
      <i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://errolseo.github.io/categories" title="Categories">
    
      <i class="sidebar-button-icon fas fa-lg fa-list" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://errolseo.github.io/archives" title="Archives">
    
      <i class="sidebar-button-icon fas fa-lg fa-folder-open" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://errolseo.github.io/about" title="About">
    
      <i class="sidebar-button-icon fas fa-lg fa-user" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/errolseo" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      Synthetic Text Image (2/3)
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2022-03-22T00:00:00Z">
        
  March 22, 2022

      </time>
    
    
  
  
    <span>in</span>
    
      <a href="https://errolseo.github.io/categories/ocr">OCR</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>작성일 기준, 상위 5개의 <a href="https://paperswithcode.com/task/scene-text-recognition">scene text recognition(STR) State-of-the-Art(SOTA) 논문</a> MJ+ST를 학습 데이터로 사용해 작성되었다. 기존 모델과의 비교를 위해 같은 데이터를 사용하는 부분도 있지만 새로운 데이터들의 공신력이 크지 않은 점도 있다. 하지만 MJ, ST보다 더 나은 데이터가 존재하지 않는 것은 아니다.</p>
<h4 id="heading">#</h4>
<p>2021년 7월에 공개된 <a href="https://arxiv.org/abs/2107.09313">SynthTIGER</a>에서는 기존 MJ, ST에 비해 개선된 데이터를 생성해 STR 모델의 성능에 기여하려는 노력을 찾을 수 있었다.</p>



<div class="figure center" >
  
    <img class="fig-img" src="https://errolseo.github.io/images/OCR/3/1.webp"  alt="Figure 1. Samples of synthetic dataset (Ours = SynthTIGER)">
  
   
    <span class="caption">Figure 1. Samples of synthetic dataset (Ours = SynthTIGER)</span>
  
</div>

<p>논문의 저자들은 SynthTIGER가 MJ와 같은 word box image를 생성하지만 ST 수준의 노이즈를 포함한 데이터라고 소개한다. 여기서의 노이즈는 잘 못된 데이터가 아닌 어려운 데이터를 말한다.</p>
<p>Word box image는 scene text image에 비해 이미지 한 장이 가지는 정보량이 적어 단순하게 비교하면 word box image의 필요성을 못 느낄 수 있다. 하지만 word box image는 scene text image보다 유사성 측면에서 고려해야할 부분이 적어 좀 더 다양한 데이터를 생성할 수 있다. 그리고 <span class="highlight-text primary">scene text image도 STR 모델의 입력 형태인 word box image로 crop되는 과정에서 결국은 <b>모든 배경 정보를 소실</b>하기 때문에</span> STR 모델의 입력 데이터로는 word box image를 합성하는 것이 더 유리하다.</p>
<p>


<div class="figure center" >
  
    <img class="fig-img" src="https://errolseo.github.io/images/OCR/3/2.webp"  alt="Figure 2. The performance of rendering functions">
  
   
    <span class="caption">Figure 2. The performance of rendering functions</span>
  
</div>




<div class="figure center" >
  
    <img class="fig-img" src="https://errolseo.github.io/images/OCR/3/3.webp"  alt="Figure 3. Rendering effect visualization of SynthTIGER modules">
  
   
    <span class="caption">Figure 3. Rendering effect visualization of SynthTIGER modules</span>
  
</div>
</p>
<p>논문에서는 rendering function들이 STR 모델의 정확도에 얼마만큼 영향을 주는지에 대한 측정을 진행했다. Regular(IIIT5k, SVT, IC03, IC13), Irregular(IC15, SVTP, CUTE80)의 차이는 dataset 속 텍스트의 형태가 단순한가 복잡한가의 차이(저자들이 말하는 노이즈의 강도)로 볼 수 있다. 실험에서 흥미로운 부분을 사견과 함께 정리해 보았다.</p>
<p>1. Post-processing</p>
<ul>
<li>Irregular 데이터에는 흐릿한 사진 등의 노이즈가 많이 포함되어 있기 때문에 post-processing의 영향이 큰 것이 실제 실험을 통해 확인됨</li>
</ul>
<p>2. Texture blending</p>
<ul>
<li>Scene text image 내의 텍스트는 자연 현상에 의해 훼손(기스, 발색 등)이 필연적으로 존재함</li>
<li>하지만 SynthTIGER에서 사용한 texture image는 우리가 흔히 아는 질감을 표현한 것이 아닌, 배경 이미지를 재활용했을 뿐이기에 현실의 질감을 재현한 것보다는 단순 노이즈에 불과함</li>
<li>그럼에도 불구하고 텍스트 내부 노이즈의 유무는 STR 모델 성능에 큰 영향을 줌</li>
</ul>
<p>3. Blending modes</p>
<ul>
<li>배경 이미지의 합성 여부를 나타낸 이 지표가 생각보다 STR 모델 성능에 영향을 주지 않음</li>
<li>생각해보면 대부분의 scene text image 내의 텍스트는 흔들림, 훼손됨 등의 노이즈를 제외하면 가독성을 위해 단색의 배경 위에 구분이 쉬운 색상을 이용해 작성되어 있는 것을 확인할 수 있음</li>
</ul>
<h4 id="heading-1">#</h4>
<p>위 내용을 토대로 추가적인 개선점을 생각해 보았다. 우선 post-processing 단계에서 이미지 전체에 노이즈를 주는 선택지밖에 없는 것이 아쉬웠다. 흔들림 등으로 인해 이미지 전체에 노이즈가 생기는 경우도 많지만 가려짐, 훼손됨 등의 이미지 일부에 강한 노이즈가 있는 경우도 더러 존재한다. 이런 경우의 수를 포함하기 위해 post-processing 단계에서 이미지 일부에 강한 노이즈를 줄 수 있도록 하면 좋을 것 같다.</p>
<p>그리고 배경 이미지를 blending 하는 것은 가독성을 떨어뜨려 오히려 서체의 특징을 배우는데 방해를 줄 수 있을 것 같았다. 데이터 내에 심한 노이즈에 의해 글자와 배경의 구분이 힘든 경우가 다수 존재했다. 이런 abnormal 데이터는 모델의 성능 향상에 도움이 되는 부분이 존재하지만, 특이한 필기체들의 일반화를 방해할 것 같다는 생각이 들었다. 다만 지표에서 보여주다 싶이, 텍스트 내부의 노이즈 유무는 중요하기 때문에 질감을 표현할 수 있는 texture image를 이용해 blending을 테스트하면 좋을 것 같다.</p>
<h4 id="heading-2">#</h4>
<p>OCR 인조 데이터를 생성하는 과정에서 렌더링할 텍스트의 내용은 무작위로 정해지지 않는다. <a href="https://github.com/clovaai/synthtiger/tree/master/resources/corpus">SynthTIGER의 경우</a> MJ와 ST에서 사용한 말뭉치(corpus)를 섞어 사용하였고, ST의 경우 <a href="https://archive.ics.uci.edu/ml/datasets/Twenty+Newsgroups">Newsgroup 20 dataset</a>의 corpus를 사용했다. 이런 과정이 필요한 이유에 대해 설명하기 위해서는 언어라는 데이터의 특성을 알아야 한다.</p>



<div class="figure center" >
  
    <img class="fig-img" src="https://errolseo.github.io/images/OCR/3/4.webp"  alt="Figure 4. Likelihood에 따른 예측 확률 (티, 터, 타)">
  
   
    <span class="caption">Figure 4. Likelihood에 따른 예측 확률 (티, 터, 타)</span>
  
</div>

<p>Fig.4의 가려진 부분에 대해 &lsquo;티, 터, 타&rsquo;가 모두 가능하지만 &lsquo;컴퓨터&rsquo;일 확률이 높다고 우리는 예측할 수 있다. 이처럼 우리는 텍스트에 심각한 노이즈가 포함되어 있어도 일반적으로 확률이 높은 선택지를 추려낼 수 있다. STR 모델에게도 이러한 통계적인 지식을 학습시킨다면 노이즈가 심한 이미지에서도 더 나은 확률로 정답을 유추해낼 수 있을 것이다. 즉 무작위 알파벳의 조합보다는 실제로 사용하는 단어들로 인조 데이터를 생성하는 것이 좋다.</p>
<h4 id="heading-3">#</h4>
<p>MJ, ST가 등장한 시절보다 딥 러닝에 대한 연구가 상당히 높은 수준까지 올라왔다. 최근에선 데이터의 정규화(normalize)없이 모델을 학습시키는 일은 생각하기 힘들다. 어찌 보면 이제는 당연한 일을 SynthTIGER의 저자들이 감사하게도 정리해주었다.</p>
<p>


<div class="figure center" >
  
    <img class="fig-img" src="https://errolseo.github.io/images/OCR/3/5.webp"  alt="Figure 5. STR accuracy by length distributions">
  
   
    <span class="caption">Figure 5. STR accuracy by length distributions</span>
  
</div>




<div class="figure center" >
  
    <img class="fig-img" src="https://errolseo.github.io/images/OCR/3/6.webp"  alt="Figure 6. STR accuracy by character distributions">
  
   
    <span class="caption">Figure 6. STR accuracy by character distributions</span>
  
</div>
</p>
<p>그래프에 대해 간단히 설명하자면 Fig.5의 경우 빨간색 지표들이 정규화를 진행한 결과이다. 정규화를 한다고 해서 결과가 극적으로 달라지지는 않는다. 하지만 추가적인 데이터 혹은 모델의 개선 없이 기존에 풀지 못하던 문제를 풀 수 있게 되기에 들이는 노력에 비해 비약적인 성능 상승인 건 확실하다. 특히 Fig.6에서 rare character (자주 사용하지 않는 알파벳)에 대해 높은 성능 상승을 보여주고 있다. 이는 한국어, 중국어, 일본어 등에는 중요한 사실이다.</p>
<p>정규화 방식에 대한 자세한 내용을 다루지 않겠지만 만약 본인이 SynthTIGER 혹은 그와 유사한 방식으로 인조 데이터를 생성할 예정이 있다면 <strong>본인이 가진 데이터의 특성을 잘 고려해 가면서</strong> 참고한다면 도움이 될 것이다.</p>
<h4 id="reference">Reference</h4>
<p>[1] M. Yim, et al. <a href="https://arxiv.org/abs/2107.09313">SynthTIGER: Synthetic Text Image GEneratoR Towards Better Text Recognition Models</a></p>

              


            </div>
          </div>
          
            <div id="post-footer" class="post-footer main-content-wrap">
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">Tag</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://errolseo.github.io/tags/synthetic-text-image/">Synthetic Text Image</a>

  <a class="tag tag--primary tag--small" href="https://errolseo.github.io/tags/synthtiger/">SynthTIGER</a>

                  </div>
                
              
              <div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://errolseo.github.io/post/ocr/2/" data-tooltip="Synthetic Text Image (1/3)" aria-label="PREVIOUS: Synthetic Text Image (1/3)">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://errolseo.github.io/post/ocr/4/" data-tooltip="Synthetic Text Image (3/3)" aria-label="NEXT: Synthetic Text Image (3/3)">
          
              <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share" >
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </a>
      </li>
      
    
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#main" aria-label="Back to top">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
      </a>
    </li>
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#post-footer" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  </ul>
</div>

              
  <script src="https://utteranc.es/client.js"
    repo="errolseo/blog-comments"
    issue-term="title"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>


            </div>
          
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2025 Errol Seo. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://errolseo.github.io/post/ocr/2/" data-tooltip="Synthetic Text Image (1/3)" aria-label="PREVIOUS: Synthetic Text Image (1/3)">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://errolseo.github.io/post/ocr/4/" data-tooltip="Synthetic Text Image (3/3)" aria-label="NEXT: Synthetic Text Image (3/3)">
          
              <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share" >
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </a>
      </li>
      
    
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#main" aria-label="Back to top">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
      </a>
    </li>
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#post-footer" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  </ul>
</div>

      </div>
      

      
    </div>
    
  <div id="cover" style="background-color:#212F3D"></div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://errolseo.github.io/js/script-gk7andjae0nhgbvnu89btjh6hckgh4vufbnvrr6irhenjpabpkfdsqhosyq.min.js"></script>




  </body>
</html>

